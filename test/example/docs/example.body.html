<script>
  class UcpExampleImplementation extends HTMLElement {

    // Attribute 'code' is supplied with base64 encoded code for the selected framework
    constructor() {
      super()
      this.attachShadow({ mode: 'open' })
      this.show = false
      this.render()
      this.shadowRoot.addEventListener('toggle-show-code', () => {
        this.show = !this.show
        this.render()
      })
    }

    render() {
      this.shadowRoot.innerHTML = `<div class='example'>
    <div class='content' x-data='{show: true}'>
    <slot></slot>
    </div>
        <button class='toggle-code' onclick="dispatchEvent(new CustomEvent('toggle-show-code',{bubbles:true}));"
    >${this.show ? 'Hide' : 'Show'} code</button>
            ${this.show ? `<div class='code'>
                ${window.atob(this.attributes.code.value)
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')}
            </div>` : ''}
    </div>

<style>
    .example {
        display: flex;
        border: 1px solid #545454;
        border-radius: 5px;
        flex-direction: column;
    }

    .code {
        border-top: 1px solid #545454;
        padding: 10px;
    }

    .content {
        margin: 10px;
    }

    .toggle-code {
        width: 100%;
        background-color: transparent;
        border: none;
        font-family: Avenir, Helvetica, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        color: #a8c2de;
        text-decoration: none;
        border-top: 1px solid #545454;
    }
</style>`
    }
  }

  window.customElements.define('ucp-example-implementation', UcpExampleImplementation)
</script>